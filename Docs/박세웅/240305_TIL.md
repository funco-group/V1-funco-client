# DDD 아키텍처

## 요청 처리 흐름

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/a680e364-a3e3-42aa-9f15-86682ac2c31b/7298fe2e-8a01-4ede-8437-4f5925af073d/Untitled.png)

- 컨트롤러 : HTTP 요청 파라미터를 응용 서비스가 필요로 하는 데이터로 변환해서 응용 서비스를 실행할 때 인자로 전달한다.
- 응용 서비스 : 도메인 모델을 이용해서 기능을 구현한다. 기능 구현에 필요한 도메인 객체를 리포지터리에서 가져와 실행하거나 신규 도메인 객체를 생성해서 리포지터리에 저장한다.
    - 도메인의 상태를 변경하므로 변경 상태가 물리 저장소에 올바르게 반영되도록 트랜잭션을 관리해야 한다.(@Transactional)

## 도메인 패키지 구조

도메인을 위주로 패키지를 구성한다. 도메인 별로 패키지를 만든 다음 그 아래에 Controller, Service, domain 패키지를 두는 방식이다. 처음에는 그저 기능별로 모아놓음으로써 한 번에 파악하기 쉽다는 정도의 이점만 생각했었다.

## 클린 아키텍처 : 모든 계층의 의존성이 도메인을 향하도록 만든다

그러나 클린 아키텍처라는 개념을 알게 되면서, 도메인을 위주로 패키지를 구성하는 더 근본적인 이유를 알게 되었다. 도메인 모델은 소프트웨어가 해결하고자 하는 문제(도메인)를 모델링 한 것이다. 그러므로 도메인 모델은 그 자체로 존재해야 하며, 이러한 도메인 모델로부터 어플리케이션의 모든 로직이 출발해야 한다.

클린 아키텍처는 이러한 문제의식에 대해 답을 내놓기 위한 시도이다. 그리고 도메인 패키지 구조는 클린 아키텍처에 기반하여, 클린 아키텍처가 해결하려는 문제의식을 잘 반영하는 구조이다.

[참고자료]

도메인 주도 개발 시작하기 : DDD 핵심 개념 정리부터 구현까지

[클린 아키텍처(Clean Architecture) 개념 및 원칙](https://daryeou.tistory.com/280#google_vignette)
